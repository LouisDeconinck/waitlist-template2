---
---

<theme-toggle>
  <button
    id="theme-btn"
    type="button"
    class="relative inline-flex h-9 w-9 items-center justify-center rounded-md border border-border bg-background/50 shadow-sm transition-colors hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary/20"
    aria-label="Toggle dark mode"
  >
    <!-- Sun icon for light mode -->
    <svg 
      id="sun-icon"
      class="h-4 w-4 hidden dark:block"
      xmlns="http://www.w3.org/2000/svg" 
      width="24" 
      height="24" 
      viewBox="0 0 24 24" 
      fill="none" 
      stroke="currentColor" 
      stroke-width="2" 
      stroke-linecap="round" 
      stroke-linejoin="round"
    >
      <circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path>
    </svg>
    <!-- Moon icon for dark mode -->
    <svg 
      id="moon-icon"
      class="h-4 w-4 block dark:hidden text-muted-foreground"
      xmlns="http://www.w3.org/2000/svg" 
      width="24" 
      height="24" 
      viewBox="0 0 24 24" 
      fill="none" 
      stroke="currentColor" 
      stroke-width="2" 
      stroke-linecap="round" 
      stroke-linejoin="round"
    >
      <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
    </svg>
  </button>
</theme-toggle>

<script>
  class ThemeToggle extends HTMLElement {
    connectedCallback() {
      const btn = this.querySelector('#theme-btn');
      
      btn?.addEventListener('click', () => {
        const isDark = document.documentElement.classList.contains('dark');
        const newTheme = isDark ? 'light' : 'dark';
        
        if (newTheme === 'dark') {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
        
        document.cookie = `theme=${newTheme};path=/;max-age=31536000`;
      });
    }
  }

  customElements.define('theme-toggle', ThemeToggle);
</script>
